<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</title>
  <style>
    body {
      background: url("logo2.jpg") no-repeat center center fixed;
      background-size: cover;
      font-family: 'Cairo', sans-serif;
      color: white;
      margin: 0;
      padding: 2rem;
    }

    .container {
      background-color: rgba(0, 0, 0, 0.7);
      padding: 2rem;
      border-radius: 12px;
      max-width: 750px;
      margin: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(255, 255, 255, 0.95);
      color: #111;
      border-radius: 8px;
      overflow: hidden;
    }

    th, td {
      padding: 1rem;
      border-bottom: 1px solid #ddd;
      text-align: right;
    }

    th {
      background-color: #00bbf9;
      color: white;
    }

    td[contenteditable="true"] {
      background-color: #f9f9f9;
    }

    td.readonly {
      background-color: #eee;
      color: gray;
    }

    .actions {
      text-align: center;
      margin-top: 1.5rem;
    }

    .btn {
      background-color: #00bbf9;
      padding: 0.7rem 1.4rem;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      margin: 0 5px;
      border: none;
    }

    select {
      padding: 0.5rem 1rem;
      margin-bottom: 1rem;
      border-radius: 6px;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 style="text-align: center;">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</h1>

    <label for="rest-day">Ø§Ø®ØªØ± ÙŠÙˆÙ… Ø§Ù„Ø±Ø§Ø­Ø©:</label>
    <select id="rest-day">
      <option value="">-- Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙŠÙˆÙ… Ø±Ø§Ø­Ø© Ù…Ø­Ø¯Ø¯ --</option>
      <option value="Ø§Ù„Ø³Ø¨Øª">Ø§Ù„Ø³Ø¨Øª</option>
      <option value="Ø§Ù„Ø£Ø­Ø¯">Ø§Ù„Ø£Ø­Ø¯</option>
      <option value="Ø§Ù„Ø§Ø«Ù†ÙŠÙ†">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option>
      <option value="Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option>
      <option value="Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option>
      <option value="Ø§Ù„Ø®Ù…ÙŠØ³">Ø§Ù„Ø®Ù…ÙŠØ³</option>
      <option value="Ø§Ù„Ø¬Ù…Ø¹Ø©">Ø§Ù„Ø¬Ù…Ø¹Ø©</option>
    </select>

    <table id="week-table">
      <thead>
        <tr>
          <th>Ø§Ù„ÙŠÙˆÙ…</th>
          <th>Ø§Ù„Ù…Ù‡Ø§Ù…</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Ø§Ù„Ø³Ø¨Øª</td><td contenteditable="true" data-day="Ø§Ù„Ø³Ø¨Øª"></td></tr>
        <tr><td>Ø§Ù„Ø£Ø­Ø¯</td><td contenteditable="true" data-day="Ø§Ù„Ø£Ø­Ø¯"></td></tr>
        <tr><td>Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</td><td contenteditable="true" data-day="Ø§Ù„Ø§Ø«Ù†ÙŠÙ†"></td></tr>
        <tr><td>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</td><td contenteditable="true" data-day="Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡"></td></tr>
        <tr><td>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</td><td contenteditable="true" data-day="Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡"></td></tr>
        <tr><td>Ø§Ù„Ø®Ù…ÙŠØ³</td><td contenteditable="true" data-day="Ø§Ù„Ø®Ù…ÙŠØ³"></td></tr>
        <tr><td>Ø§Ù„Ø¬Ù…Ø¹Ø©</td><td contenteditable="true" data-day="Ø§Ù„Ø¬Ù…Ø¹Ø©"></td></tr>
      </tbody>
    </table>

    <div class="actions">
      <button class="btn" onclick="clearWeek()">Ù…Ø³Ø­ Ø§Ù„Ø¬Ø¯ÙˆÙ„</button>
      <a href="index.html" class="btn">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    </div>
  </div>

  <script>
    const restDaySelect = document.getElementById("rest-day");

    window.onload = () => {
      const savedTasks = JSON.parse(localStorage.getItem("weekData")) || {};
      const savedRestDay = localStorage.getItem("restDay");

      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…
      document.querySelectorAll("td[contenteditable='true']").forEach(td => {
        const day = td.dataset.day;
        if (savedTasks[day]) td.innerText = savedTasks[day];

        td.addEventListener("input", () => {
          savedTasks[day] = td.innerText;
          localStorage.setItem("weekData", JSON.stringify(savedTasks));
        });
      });

      // ØªØ­Ù…ÙŠÙ„ ÙŠÙˆÙ… Ø§Ù„Ø±Ø§Ø­Ø©
      if (savedRestDay) {
        restDaySelect.value = savedRestDay;
        setRestDay(savedRestDay);
      }

      restDaySelect.addEventListener("change", () => {
        const selectedDay = restDaySelect.value;
        localStorage.setItem("restDay", selectedDay);
        setRestDay(selectedDay);
      });
    };

    function setRestDay(day) {
      document.querySelectorAll("td[data-day]").forEach(td => {
        const currentDay = td.dataset.day;
        if (currentDay === day) {
          td.classList.add("readonly");
          td.innerText = "Ø±Ø§Ø­Ø© ðŸ’¤";
          td.setAttribute("contenteditable", "false");
        } else {
          if (td.classList.contains("readonly")) {
            td.classList.remove("readonly");
            td.innerText = "";
            td.setAttribute("contenteditable", "true");
          }
        }
      });
    }

    function clearWeek() {
      if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆÙŠÙˆÙ… Ø§Ù„Ø±Ø§Ø­Ø©ØŸ")) {
        localStorage.removeItem("weekData");
        localStorage.removeItem("restDay");
        location.reload();
      }
    }
  </script>
</body>
</html>
